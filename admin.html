<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <center>
    <table>
    <thead>
        <tr>
                <td>ID</td>
                <td>Kegiatan</td>
                <td>Hari</td>
                <td>Poster</td>
                <td>Action</td>
        </tr>
    </thead>
    <tbody id="menu">
        
    </tbody>
    <br>
</table>
</center>
<center>
        <button value="Log Out" onclick="logOut()">Log Out</button>
    </center>

    
</body>

<script>

class Product{
        constructor(kegiatan, hari, poster){
            this.kegiatan = kegiatan,
            this.hari = hari,
            this.poster = poster
        }
    }
    var menu = [
                new Product('Lari', 'Senin', 'https://thumb.viva.co.id/media/frontend/thumbs3/2018/01/03/5a4c691dcc317-ini-bedanya-lari-indoor-dan-outdoor-yang-perlu-anda-tahu_665_374.jpg'),
                new Product('estafet', 'Selasa', 'https://moondoggiesmusic.com/wp-content/uploads/2019/07/Teknik-Lari-Estafet.png')            
            ]

 function printMenuAdmin(){
        var output = ''
        for(var i = 0 ; i< menu.length ; i++){
            output += 
            `
            <tr>
                <td>${i +1}</td>
                <td>${menu[i].kegiatan}</td>
                <td>${menu[i].hari}<select>
    <option value="Senin"></option>
    <option value="Selasa"></option>
    <option value="Rabu"></option>
    <option value="Kamis"></option>
    <option value="Jumat"></option>
    <option value="Sabtu"></option>
    <option value="Minggu"></option>
</select>
</td>
                <td><img src=${menu[i].poster} alt=${menu[i].kegiatan} width="100px"></td>
                <td>
                    <input type="button" value="Edit" onClick="editProduct(${i})"> 
                    <br>       
                    <input type="button" value="Delete" onClick="deleteProduct(${i})">
                </td>
            </tr>
            `
        }
        return document.getElementById('menu').innerHTML = output +
        `
            <tr>
                <td></td>    
                <td><input type="text" id="newName" placeholder="Input new product"></td>    
                <td><input type="text" id="newHari" placeholder="hari" ></td>    
                <td><input type="number" id="newUrl" placeholder="image"></td>    
                <td><input type="button" value="Add Product" onclick="addNewProduct()"></td>    
            </tr>
        `
    }

    function editProduct(index){
        document.getElementById("menu").rows[index].innerHTML = `
                <td></td>    
                <td><input type="text" id="editKegiatan" placeholder="Input new kegiatan"></td>    
                <td><input type="text" id="edithari" placeholder="hari" ></td>    
                <td><input type="number" id="editPrice" placeholder="Input price of new product"></td>    
                <td><input type="button" value="Yes" onclick="confirmProduct(${index})"></td>   
                <td><input type="button" value="no" onclick="printMenuAdmin()"></td>    
        `
    }
        function addNewProduct(){
        var newName = document.getElementById('newName').value;
        console.log(newName)
        var newURL = document.getElementById('newURL');
        console.log(newURL)
        var newPrice = document.getElementById('newPrice').value;
        if(newName === '' || newURL === '' || newPrice === ''){
            return alert('Please Input the product')
        }else{
            menu.push(new Product(newName, newURL, newPrice))
            printMenuAdmin()
        }
    }

    function deleteProduct(index){
        menu.splice(index, 1)
        printMenuAdmin()
    }

    

    function confirmProduct(index){
        var newName = document.getElementById("editName").value
        var newImg = document.getElementById("editUrl").value
        var newPrice = document.getElementById("editPrice").value


        if(newName === ''){
            newName = menu[index].kegiatan
        }
        if(newImg === ''){
            newImg = menu[index].nama
        }
        if(newPrice === ''){
            newPrice = menu[index].poster
        }else if(newPrice>0){
            parseInt(newPrice)
        }
        console.log(newPrice)
        menu[index].name = newName
        menu[index].image = newImg
        menu[index].price = newPrice
        printMenuAdmin()
    }    

     function logOut(){
         window.location.href = "Ujian jc11 soal no1.html"
     }



    printMenuAdmin()
    </script>
</html>    
